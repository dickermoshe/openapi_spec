components:
  schemas:
    DeleteNotificationData:
      description: subscription payload
      properties:
        timestamp:
          format: date-time
          type: string
    NewNotificationData:
      description: subscription payload
      properties:
        timestamp:
          format: date-time
          type: string
        userData:
          type: string
info:
  title: Callback Example
  version: 1.0.0
openapi: 3.0.0
paths:
  /streams:
    post:
      callbacks:
        dummy: {}
        onData:
          '{$request.query.callbackUrl}/data':
            delete:
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/DeleteNotificationData'
              responses:
                '202':
                  description: 'Your server implementation should return this HTTP
                    status code

                    if the data was received successfully

                    '
                '204':
                  description: 'Your server should return this HTTP status code if
                    no longer interested

                    in further updates

                    '
            post:
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/NewNotificationData'
              responses:
                '202':
                  description: 'Your server implementation should return this HTTP
                    status code

                    if the data was received successfully

                    '
                '204':
                  description: 'Your server should return this HTTP status code if
                    no longer interested

                    in further updates

                    '
          '{$request.query.callbackUrl}/test': {}
      description: subscribes a client to receive out-of-band data
      parameters:
      - description: 'the location where data will be sent.  Must be network accessible

          by the source server

          '
        in: query
        name: callbackUrl
        required: true
        schema:
          example: https://tonys-server.com
          format: uri
          type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                description: subscription information
                properties:
                  subscriptionId:
                    description: this unique identifier allows management of the subscription
                    example: 2531329f-fb09-4ef7-887e-84e648214436
                    type: string
                required:
                - subscriptionId
          description: subscription successfully created
